import { BytesToTextPipe } from '../../pipes/bytes-to-text.pipe';
import { CommonModule } from '@angular/common';
import { Component, ContentChildren, EventEmitter, Input, Output, ViewEncapsulation, } from '@angular/core';
import { catchError } from 'rxjs/operators';
import { NG_VALUE_ACCESSOR } from '@angular/forms';
import { expandFromTop } from '../../animations/expand-from-top';
import { FileTypeToIconPipe } from '../../pipes/file-type-to-icon.pipe';
import { getFileExtension } from '../../utils/get-file-extension';
import { getMimeTypeClass } from '../../utils/get-mime-type-class';
import { getUniqueFileName } from '../../utils/get-unique-file-name';
import { HttpEventType } from '@angular/common/http';
import { IconComponent } from '../icon/icon.component';
import { ReplacePipe } from '../../pipes/replace.pipe';
import { S2DatePipe } from '../../pipes/date.pipe';
import { takeUntilDestroyed } from '@angular/core/rxjs-interop';
import { TemplateDirective } from '../../directives/template.directive';
import * as i0 from "@angular/core";
import * as i1 from "../../services/s2-ui-translations.service";
import * as i2 from "@angular/common";
class FileUploadComponent {
    translationsService;
    destroyRef;
    static S2_TEMPLATE_HEADER = 'header';
    static S2_TEMPLATE_HEADER_CONTENT = 'header-content';
    static S2_TEMPLATE_FILE_INFO = 'file-info';
    S2_TEMPLATE_HEADER = FileUploadComponent.S2_TEMPLATE_HEADER;
    S2_TEMPLATE_HEADER_CONTENT = FileUploadComponent.S2_TEMPLATE_HEADER_CONTENT;
    S2_TEMPLATE_FILE_INFO = FileUploadComponent.S2_TEMPLATE_FILE_INFO;
    accept;
    autoUploadMethod;
    browseButtonText;
    errorDuration = 5000;
    inputId;
    maxFiles = 5;
    maxFileSize = 10485760;
    showDate = true;
    showDragDropText = 'responsive';
    showHeaderIcon = 'responsive';
    clickDownload = new EventEmitter();
    clickRemove = new EventEmitter();
    autoUploadSuccess = new EventEmitter();
    autoUploadError = new EventEmitter();
    templatesQueryList;
    templates = {};
    files = [];
    error;
    errorClearTimeout;
    disabled = false;
    onChange;
    onTouched;
    constructor(translationsService, destroyRef) {
        this.translationsService = translationsService;
        this.destroyRef = destroyRef;
    }
    ngAfterContentInit() {
        this.updateTemplates();
        this.templatesQueryList.changes.pipe(takeUntilDestroyed(this.destroyRef)).subscribe(() => {
            this.updateTemplates();
        });
    }
    writeValue(files) {
        if (Array.isArray(files)) {
            this.files = files;
        }
        else {
            this.files = [];
        }
    }
    registerOnChange(fn) {
        this.onChange = fn;
    }
    registerOnTouched(fn) {
        this.onTouched = fn;
    }
    setDisabledState(isDisabled) {
        this.disabled = isDisabled;
    }
    loadFiles(files) {
        if (files.length) {
            if (files.length > this.maxFiles - this.files.length) {
                this.showError('maxFiles');
            }
            else if (typeof this.maxFileSize === 'number' && files.some((file) => file.size > this.maxFileSize)) {
                this.showError('maxFileSize');
            }
            else if (files.some((file) => !this.isFileTypeAccepted(file))) {
                this.showError('accept');
            }
            else {
                this.showError(undefined);
                const s2Files = files.map((file) => ({
                    name: getUniqueFileName(file.name, this.files.map((file) => file.name)),
                    type: file.type,
                    size: file.size,
                    uploaded: false,
                    date: new Date(),
                    file,
                }));
                this.files = [...this.files, ...s2Files];
                this.autoUploadFiles(s2Files);
                this.onChange?.(this.files);
            }
        }
    }
    autoUploadFiles(files) {
        this.autoUploadMethod?.(files)
            .pipe(catchError((error) => {
            files?.forEach((file) => {
                file.uploadProgress = undefined;
            });
            this.onChange?.(this.files);
            this.autoUploadError.emit({ files, error: error });
            throw error;
        }))
            .subscribe({
            next: (event) => {
                if (event.type === HttpEventType.UploadProgress) {
                    const progress = Math.round((event.loaded * 100) / event.total);
                    files?.forEach((file) => {
                        file.uploadProgress = progress;
                    });
                }
                else if (event.type === HttpEventType.Response) {
                    if (event.status >= 200 && event.status < 300) {
                        files?.forEach((file) => {
                            file.uploadProgress = undefined;
                            file.uploaded = true;
                            const receivedFile = event.body?.find((responseFile) => responseFile?.name === file.name);
                            if (receivedFile) {
                                Object.assign(file, receivedFile);
                            }
                        });
                        this.onChange?.(this.files);
                        this.autoUploadSuccess.emit(files);
                    }
                    else {
                        throw new Error(`HttpResponse status ${event.status}`);
                    }
                }
            },
        });
    }
    handleInputChange(event) {
        event.preventDefault();
        if (!this.disabled) {
            this.onTouched?.();
            this.loadFiles(Array.from(event.target.files));
        }
    }
    handleDropFile(event) {
        event.preventDefault();
        if (!this.disabled) {
            this.onTouched?.();
            this.loadFiles(Array.from(event.dataTransfer.files));
        }
    }
    handleDownloadFile(file) {
        this.clickDownload.emit(file);
    }
    handleRemoveFile(index) {
        this.clickRemove.emit(this.files[index]);
        this.files.splice(index, 1);
        this.onChange?.(this.files);
    }
    showError(error) {
        clearTimeout(this.errorClearTimeout);
        this.error = error;
        if (error) {
            this.errorClearTimeout = setTimeout(() => {
                this.error = undefined;
            }, this.errorDuration);
        }
    }
    isFileTypeAccepted(file) {
        if (!this.accept || this.accept === '*') {
            return true;
        }
        const acceptArray = this.accept
            .split(',')
            .map((type) => type.trim())
            .filter((type) => type);
        return acceptArray.some((acceptableType) => {
            if (acceptableType.indexOf('*') !== -1) {
                return getMimeTypeClass(file.type) === getMimeTypeClass(acceptableType);
            }
            else {
                return (file.type === acceptableType || getFileExtension(file.name).toLowerCase() === acceptableType.toLowerCase());
            }
        });
    }
    updateTemplates() {
        Object.keys(this.templates).forEach((templateKey) => {
            if (!this.templatesQueryList.some((template) => template.s2Template === templateKey)) {
                delete this.templates[templateKey];
            }
        });
        this.templatesQueryList.forEach((template) => {
            this.templates[template.s2Template] = template.template;
        });
    }
    static ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "16.0.2", ngImport: i0, type: FileUploadComponent, deps: [{ token: i1.S2UiTranslationsService }, { token: i0.DestroyRef }], target: i0.ɵɵFactoryTarget.Component });
    static ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "16.0.2", type: FileUploadComponent, isStandalone: true, selector: "s2-file-upload", inputs: { accept: "accept", autoUploadMethod: "autoUploadMethod", browseButtonText: "browseButtonText", errorDuration: "errorDuration", inputId: "inputId", maxFiles: "maxFiles", maxFileSize: "maxFileSize", showDate: "showDate", showDragDropText: "showDragDropText", showHeaderIcon: "showHeaderIcon" }, outputs: { clickDownload: "clickDownload", clickRemove: "clickRemove", autoUploadSuccess: "autoUploadSuccess", autoUploadError: "autoUploadError" }, host: { classAttribute: "s2-file-upload" }, providers: [
            {
                provide: NG_VALUE_ACCESSOR,
                multi: true,
                useExisting: FileUploadComponent,
            },
        ], queries: [{ propertyName: "templatesQueryList", predicate: TemplateDirective }], ngImport: i0, template: "<input\r\n  class=\"s2-file-upload__input\"\r\n  type=\"file\"\r\n  [id]=\"inputId\"\r\n  (change)=\"handleInputChange($event)\"\r\n  [multiple]=\"maxFiles > 1 && files.length < (maxFiles-1)\"\r\n  [accept]=\"accept\"\r\n  [disabled]=\"disabled\"\r\n  #inputFile\r\n/>\r\n\r\n<ng-template *ngIf=\"templates[S2_TEMPLATE_HEADER]\" [ngTemplateOutlet]=\"templates[S2_TEMPLATE_HEADER]\" />\r\n\r\n<div\r\n  *ngIf=\"!templates[S2_TEMPLATE_HEADER]\"\r\n  class=\"s2-file-upload-header\"\r\n  [ngClass]=\"{'s2-file-upload-header--disabled': disabled || files.length >= maxFiles}\"\r\n  (dragover)=\"$event.preventDefault(); $event.stopPropagation()\"\r\n  (dragleave)=\"$event.preventDefault(); $event.stopPropagation()\"\r\n  (drop)=\"handleDropFile($event)\"\r\n>\r\n  <ng-template\r\n    *ngIf=\"templates[S2_TEMPLATE_HEADER_CONTENT]\"\r\n    [ngTemplateOutlet]=\"templates[S2_TEMPLATE_HEADER_CONTENT]\"\r\n  />\r\n\r\n  <ng-container *ngIf=\"!templates[S2_TEMPLATE_HEADER_CONTENT]\">\r\n    <s2-icon\r\n      *ngIf=\"showHeaderIcon\"\r\n      class=\"s2-file-upload-header__icon\"\r\n      [ngClass]=\"{'s2-file-upload-header__icon--responsive': showHeaderIcon === 'responsive'}\"\r\n      >file_upload</s2-icon\r\n    >\r\n    <div class=\"s2-file-upload-header__content-wrapper\">\r\n      <ng-container *ngIf=\"!error\">\r\n        <ng-container *ngIf=\"showDragDropText\">\r\n          <span\r\n            class=\"s2-file-upload-header__text\"\r\n            [ngClass]=\"{'s2-file-upload-header__text--responsive': showDragDropText === 'responsive'}\"\r\n            >{{ translationsService.translations.action.dragFilesHere }}</span\r\n          >\r\n          <span\r\n            class=\"s2-file-upload-header__text\"\r\n            [ngClass]=\"{'s2-file-upload-header__text--responsive': showDragDropText === 'responsive'}\"\r\n            >{{ translationsService.translations.general.or | lowercase }}</span\r\n          >\r\n        </ng-container>\r\n        <button\r\n          type=\"button\"\r\n          class=\"s2-file-upload-header__choose\"\r\n          [disabled]=\"disabled || files.length >= maxFiles\"\r\n          (click)=\"inputFile.click()\"\r\n        >\r\n          {{ browseButtonText === undefined ? translationsService.translations.action.browse : browseButtonText }}\r\n        </button>\r\n      </ng-container>\r\n      <span *ngIf=\"error\" class=\"s2-file-upload-header__error\">\r\n        <ng-container\r\n          *ngIf=\"error === 'accept'\"\r\n          >{{ translationsService.translations.errorMsg.invalidFileFormat | replace:'{0}':accept }}</ng-container\r\n        >\r\n        <ng-container\r\n          *ngIf=\"error === 'maxFiles'\"\r\n          >{{ translationsService.translations.errorMsg.maxFilesExceed | replace:'{0}':maxFiles+'' }}</ng-container\r\n        >\r\n        <ng-container\r\n          *ngIf=\"error === 'maxFileSize'\"\r\n          >{{ translationsService.translations.errorMsg.maxFileSizeExceed | replace:'{0}':(maxFileSize | bytesToText)\r\n          }}</ng-container\r\n        >\r\n      </span>\r\n    </div>\r\n  </ng-container>\r\n</div>\r\n\r\n<ul class=\"s2-uploaded-files\">\r\n  <li *ngFor=\"let file of files; index as i\" class=\"s2-uploaded-file\" @expandFromTop>\r\n    <div class=\"s2-uploaded-file__icon-wrapper\">\r\n      <s2-icon\r\n        class=\"s2-uploaded-file__icon\"\r\n        [ngClass]=\"{'s2-uploaded-file__icon--uploaded': file.uploaded}\"\r\n        >{{ file.icon || (file.type | fileTypeToIcon) }}</s2-icon\r\n      >\r\n    </div>\r\n    <ng-container *ngTemplateOutlet=\"templates[S2_TEMPLATE_FILE_INFO]; context: {$implicit: file, index: i}\" />\r\n    <div *ngIf=\"!templates[S2_TEMPLATE_FILE_INFO]\" class=\"s2-uploaded-file__info\">\r\n      <span *ngIf=\"!file.uploaded\" class=\"s2-uploaded-file__info-name\" [title]=\"file.name\">{{ file.name }}</span>\r\n      <button\r\n        *ngIf=\"file.uploaded\"\r\n        type=\"button\"\r\n        class=\"s2-uploaded-file__info-name\"\r\n        [ngClass]=\"{'s2-uploaded-file__info-name--downloadable': true}\"\r\n        [title]=\"file.name\"\r\n        (click)=\"handleDownloadFile(file)\"\r\n      >\r\n        {{ file.name }}\r\n      </button>\r\n      <div\r\n        *ngIf=\"!file.uploaded && (file.uploadProgress || file.uploadProgress === 0)\"\r\n        class=\"s2-uploaded-file__info-progress\"\r\n      >\r\n        <div class=\"s2-uploaded-file__info-progress-background\">\r\n          <div\r\n            class=\"s2-uploaded-file__info-progress-line\"\r\n            [ngStyle]=\"{'width.%': file.uploadProgress}\"\r\n            role=\"progressbar\"\r\n            aria-valuemin=\"0\"\r\n            aria-valuemax=\"100\"\r\n            [attr.aria-valuenow]=\"file.uploadProgress\"\r\n            [attr.aria-label]=\"file.name\"\r\n          ></div>\r\n        </div>\r\n      </div>\r\n      <span\r\n        *ngIf=\"file.uploaded || (!file.uploadProgress && file.uploadProgress !== 0)\"\r\n        class=\"s2-uploaded-file__info-details\"\r\n      >\r\n        <span *ngIf=\"showDate && file.date\" class=\"s2-uploaded-file__info-details-date\">\r\n          {{ file.date | s2Date }}\r\n        </span>\r\n        <span\r\n          class=\"s2-uploaded-file__info-details-size\"\r\n          [ngClass]=\"{'s2-uploaded-file__info-details-size--uploaded': file.uploaded}\"\r\n        >\r\n          {{ file.size | bytesToText }} <s2-icon *ngIf=\"file.uploaded\">check</s2-icon>\r\n        </span>\r\n      </span>\r\n    </div>\r\n    <button\r\n      type=\"button\"\r\n      class=\"s2-uploaded-file__remove\"\r\n      (click)=\"handleRemoveFile(i)\"\r\n      [disabled]=\"!file.uploaded && (file.uploadProgress || file.uploadProgress === 0)\"\r\n    >\r\n      <s2-icon class=\"s2-uploaded-file__remove-icon\">{{ file.uploaded ? 'delete' : 'close' }}</s2-icon>\r\n    </button>\r\n  </li>\r\n</ul>\r\n", styles: [".s2-file-upload{display:block;border-radius:.375rem;border-width:2px;--tw-border-opacity: 1;border-color:hsl(var(--s2-color-neutral-200) / var(--tw-border-opacity));padding:.5rem;container-type:inline-size}.s2-file-upload__input{display:none}.s2-file-upload .s2-file-upload-header{display:flex;flex-direction:column;align-items:center;justify-content:center;row-gap:.25rem;border-radius:.375rem;border-width:1px;border-style:dashed;--tw-border-opacity: 1;border-color:hsl(var(--s2-color-neutral-300) / var(--tw-border-opacity));padding-top:.5rem;padding-bottom:.5rem}.s2-file-upload .s2-file-upload-header__icon{font-size:var(--s2-font-size-4xl);line-height:var(--s2-font-size-4xl-line-height);--tw-text-opacity: 1;color:hsl(var(--s2-color-text-400) / var(--tw-text-opacity))}.s2-file-upload .s2-file-upload-header__icon--responsive{display:none}@container (min-width: 24rem){.s2-file-upload .s2-file-upload-header__icon--responsive{display:inline-block}}.s2-file-upload .s2-file-upload-header__content-wrapper{display:flex;flex-direction:column;align-items:center;justify-content:center;column-gap:.375rem;row-gap:.125rem;padding-top:.125rem;padding-bottom:.125rem}@container (min-width: 24rem){.s2-file-upload .s2-file-upload-header__content-wrapper{flex-direction:row}}.s2-file-upload .s2-file-upload-header__text{display:inline}.s2-file-upload .s2-file-upload-header__text--responsive{display:none}@container (min-width: 24rem){.s2-file-upload .s2-file-upload-header__text--responsive{display:inline}}.s2-file-upload .s2-file-upload-header__choose{font-weight:500;--tw-text-opacity: 1;color:hsl(var(--s2-color-primary-500) / var(--tw-text-opacity))}.s2-file-upload .s2-file-upload-header__choose:hover{text-decoration-line:underline}.s2-file-upload .s2-file-upload-header__choose:disabled{--tw-text-opacity: 1;color:hsl(var(--s2-color-text-400) / var(--tw-text-opacity))}.s2-file-upload .s2-file-upload-header__choose:disabled:hover{text-decoration-line:none}.s2-file-upload .s2-file-upload-header__error{text-align:center;--tw-text-opacity: 1;color:hsl(var(--s2-color-risk-700) / var(--tw-text-opacity))}.s2-file-upload .s2-file-upload-header--disabled{--tw-bg-opacity: 1;background-color:hsl(var(--s2-color-neutral-050) / var(--tw-bg-opacity));--tw-text-opacity: 1;color:hsl(var(--s2-color-text-400) / var(--tw-text-opacity))}.s2-file-upload .s2-file-upload-header--disabled .s2-file-upload__icon{--tw-text-opacity: 1;color:hsl(var(--s2-color-text-300) / var(--tw-text-opacity))}.s2-file-upload .s2-uploaded-files{display:flex;flex-direction:column;gap:.25rem}.s2-file-upload .s2-uploaded-file{display:flex;align-items:center;gap:.5rem;overflow:hidden;border-bottom-width:1px;--tw-border-opacity: 1;border-color:hsl(var(--s2-color-neutral-200) / var(--tw-border-opacity));padding:.25rem}.s2-file-upload .s2-uploaded-file:first-child{margin-top:.5rem}.s2-file-upload .s2-uploaded-file:last-child{border-bottom-width:0px}.s2-file-upload .s2-uploaded-file__icon-wrapper{display:flex;height:2rem;width:2rem;flex-shrink:0;align-items:center;justify-content:center;border-radius:.375rem;--tw-bg-opacity: 1;background-color:hsl(var(--s2-color-neutral-100) / var(--tw-bg-opacity))}@container (min-width: 24rem){.s2-file-upload .s2-uploaded-file__icon-wrapper{height:2.5rem;width:2.5rem}}.s2-file-upload .s2-uploaded-file__icon{flex-shrink:0;font-size:var(--s2-font-size-2xl);line-height:1;--tw-text-opacity: 1;color:hsl(var(--s2-color-text-500) / var(--tw-text-opacity))}@container (min-width: 24rem){.s2-file-upload .s2-uploaded-file__icon{font-size:var(--s2-font-size-3xl);line-height:1}}.s2-file-upload .s2-uploaded-file__icon--uploaded{--tw-text-opacity: 1;color:hsl(var(--s2-color-text-600) / var(--tw-text-opacity))}.s2-file-upload .s2-uploaded-file__info{display:flex;flex-grow:1;flex-direction:column;overflow:hidden}.s2-file-upload .s2-uploaded-file__info-name{display:inline-block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;text-align:left;--tw-text-opacity: 1;color:hsl(var(--s2-color-text-700) / var(--tw-text-opacity))}.s2-file-upload .s2-uploaded-file__info-name--downloadable{--tw-text-opacity: 1;color:hsl(var(--s2-color-text-900) / var(--tw-text-opacity))}.s2-file-upload .s2-uploaded-file__info-name--downloadable:hover{text-decoration-line:underline}.s2-file-upload .s2-uploaded-file__info-progress{display:flex;width:100%;max-width:24rem;padding-top:.375rem;padding-bottom:.375rem}.s2-file-upload .s2-uploaded-file__info-progress-background{display:flex;height:.5rem;flex-grow:1;overflow:hidden;border-radius:9999px;--tw-bg-opacity: 1;background-color:hsl(var(--s2-color-neutral-100) / var(--tw-bg-opacity))}.s2-file-upload .s2-uploaded-file__info-progress-line{height:100%;--tw-bg-opacity: 1;background-color:hsl(var(--s2-color-primary-500) / var(--tw-bg-opacity));--tw-shadow: 0 4px 6px -1px rgb(0 0 0 / .1), 0 2px 4px -2px rgb(0 0 0 / .1);--tw-shadow-colored: 0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow);transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.s2-file-upload .s2-uploaded-file__info-details{display:flex;flex-wrap:wrap;column-gap:.5rem}.s2-file-upload .s2-uploaded-file__info-details-date{font-size:var(--s2-font-size-sm);line-height:var(--s2-font-size-sm-line-height);--tw-text-opacity: 1;color:hsl(var(--s2-color-text-400) / var(--tw-text-opacity))}.s2-file-upload .s2-uploaded-file__info-details-size{font-size:var(--s2-font-size-sm);line-height:var(--s2-font-size-sm-line-height);--tw-text-opacity: 1;color:hsl(var(--s2-color-text-500) / var(--tw-text-opacity))}.s2-file-upload .s2-uploaded-file__info-details-size--uploaded{--tw-text-opacity: 1;color:hsl(var(--s2-color-success-500) / var(--tw-text-opacity))}.s2-file-upload .s2-uploaded-file__remove{margin-left:auto;flex-shrink:0;padding:.25rem;--tw-text-opacity: 1;color:hsl(var(--s2-color-text-700) / var(--tw-text-opacity))}.s2-file-upload .s2-uploaded-file__remove:hover{--tw-text-opacity: 1;color:hsl(var(--s2-color-risk-700) / var(--tw-text-opacity))}.s2-file-upload .s2-uploaded-file__remove:disabled{--tw-text-opacity: 1;color:hsl(var(--s2-color-text-300) / var(--tw-text-opacity))}.s2-file-upload .s2-uploaded-file__remove-icon{font-size:var(--s2-font-size-xl);line-height:var(--s2-font-size-xl-line-height)}\n"], dependencies: [{ kind: "ngmodule", type: CommonModule }, { kind: "directive", type: i2.NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }, { kind: "directive", type: i2.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { kind: "directive", type: i2.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "directive", type: i2.NgTemplateOutlet, selector: "[ngTemplateOutlet]", inputs: ["ngTemplateOutletContext", "ngTemplateOutlet", "ngTemplateOutletInjector"] }, { kind: "directive", type: i2.NgStyle, selector: "[ngStyle]", inputs: ["ngStyle"] }, { kind: "pipe", type: i2.LowerCasePipe, name: "lowercase" }, { kind: "component", type: IconComponent, selector: "s2-icon" }, { kind: "pipe", type: BytesToTextPipe, name: "bytesToText" }, { kind: "pipe", type: ReplacePipe, name: "replace" }, { kind: "pipe", type: S2DatePipe, name: "s2Date" }, { kind: "pipe", type: FileTypeToIconPipe, name: "fileTypeToIcon" }], animations: [expandFromTop()], encapsulation: i0.ViewEncapsulation.None });
}
export { FileUploadComponent };
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "16.0.2", ngImport: i0, type: FileUploadComponent, decorators: [{
            type: Component,
            args: [{ selector: 's2-file-upload', standalone: true, imports: [CommonModule, IconComponent, BytesToTextPipe, ReplacePipe, S2DatePipe, FileTypeToIconPipe], encapsulation: ViewEncapsulation.None, host: { class: 's2-file-upload' }, providers: [
                        {
                            provide: NG_VALUE_ACCESSOR,
                            multi: true,
                            useExisting: FileUploadComponent,
                        },
                    ], animations: [expandFromTop()], template: "<input\r\n  class=\"s2-file-upload__input\"\r\n  type=\"file\"\r\n  [id]=\"inputId\"\r\n  (change)=\"handleInputChange($event)\"\r\n  [multiple]=\"maxFiles > 1 && files.length < (maxFiles-1)\"\r\n  [accept]=\"accept\"\r\n  [disabled]=\"disabled\"\r\n  #inputFile\r\n/>\r\n\r\n<ng-template *ngIf=\"templates[S2_TEMPLATE_HEADER]\" [ngTemplateOutlet]=\"templates[S2_TEMPLATE_HEADER]\" />\r\n\r\n<div\r\n  *ngIf=\"!templates[S2_TEMPLATE_HEADER]\"\r\n  class=\"s2-file-upload-header\"\r\n  [ngClass]=\"{'s2-file-upload-header--disabled': disabled || files.length >= maxFiles}\"\r\n  (dragover)=\"$event.preventDefault(); $event.stopPropagation()\"\r\n  (dragleave)=\"$event.preventDefault(); $event.stopPropagation()\"\r\n  (drop)=\"handleDropFile($event)\"\r\n>\r\n  <ng-template\r\n    *ngIf=\"templates[S2_TEMPLATE_HEADER_CONTENT]\"\r\n    [ngTemplateOutlet]=\"templates[S2_TEMPLATE_HEADER_CONTENT]\"\r\n  />\r\n\r\n  <ng-container *ngIf=\"!templates[S2_TEMPLATE_HEADER_CONTENT]\">\r\n    <s2-icon\r\n      *ngIf=\"showHeaderIcon\"\r\n      class=\"s2-file-upload-header__icon\"\r\n      [ngClass]=\"{'s2-file-upload-header__icon--responsive': showHeaderIcon === 'responsive'}\"\r\n      >file_upload</s2-icon\r\n    >\r\n    <div class=\"s2-file-upload-header__content-wrapper\">\r\n      <ng-container *ngIf=\"!error\">\r\n        <ng-container *ngIf=\"showDragDropText\">\r\n          <span\r\n            class=\"s2-file-upload-header__text\"\r\n            [ngClass]=\"{'s2-file-upload-header__text--responsive': showDragDropText === 'responsive'}\"\r\n            >{{ translationsService.translations.action.dragFilesHere }}</span\r\n          >\r\n          <span\r\n            class=\"s2-file-upload-header__text\"\r\n            [ngClass]=\"{'s2-file-upload-header__text--responsive': showDragDropText === 'responsive'}\"\r\n            >{{ translationsService.translations.general.or | lowercase }}</span\r\n          >\r\n        </ng-container>\r\n        <button\r\n          type=\"button\"\r\n          class=\"s2-file-upload-header__choose\"\r\n          [disabled]=\"disabled || files.length >= maxFiles\"\r\n          (click)=\"inputFile.click()\"\r\n        >\r\n          {{ browseButtonText === undefined ? translationsService.translations.action.browse : browseButtonText }}\r\n        </button>\r\n      </ng-container>\r\n      <span *ngIf=\"error\" class=\"s2-file-upload-header__error\">\r\n        <ng-container\r\n          *ngIf=\"error === 'accept'\"\r\n          >{{ translationsService.translations.errorMsg.invalidFileFormat | replace:'{0}':accept }}</ng-container\r\n        >\r\n        <ng-container\r\n          *ngIf=\"error === 'maxFiles'\"\r\n          >{{ translationsService.translations.errorMsg.maxFilesExceed | replace:'{0}':maxFiles+'' }}</ng-container\r\n        >\r\n        <ng-container\r\n          *ngIf=\"error === 'maxFileSize'\"\r\n          >{{ translationsService.translations.errorMsg.maxFileSizeExceed | replace:'{0}':(maxFileSize | bytesToText)\r\n          }}</ng-container\r\n        >\r\n      </span>\r\n    </div>\r\n  </ng-container>\r\n</div>\r\n\r\n<ul class=\"s2-uploaded-files\">\r\n  <li *ngFor=\"let file of files; index as i\" class=\"s2-uploaded-file\" @expandFromTop>\r\n    <div class=\"s2-uploaded-file__icon-wrapper\">\r\n      <s2-icon\r\n        class=\"s2-uploaded-file__icon\"\r\n        [ngClass]=\"{'s2-uploaded-file__icon--uploaded': file.uploaded}\"\r\n        >{{ file.icon || (file.type | fileTypeToIcon) }}</s2-icon\r\n      >\r\n    </div>\r\n    <ng-container *ngTemplateOutlet=\"templates[S2_TEMPLATE_FILE_INFO]; context: {$implicit: file, index: i}\" />\r\n    <div *ngIf=\"!templates[S2_TEMPLATE_FILE_INFO]\" class=\"s2-uploaded-file__info\">\r\n      <span *ngIf=\"!file.uploaded\" class=\"s2-uploaded-file__info-name\" [title]=\"file.name\">{{ file.name }}</span>\r\n      <button\r\n        *ngIf=\"file.uploaded\"\r\n        type=\"button\"\r\n        class=\"s2-uploaded-file__info-name\"\r\n        [ngClass]=\"{'s2-uploaded-file__info-name--downloadable': true}\"\r\n        [title]=\"file.name\"\r\n        (click)=\"handleDownloadFile(file)\"\r\n      >\r\n        {{ file.name }}\r\n      </button>\r\n      <div\r\n        *ngIf=\"!file.uploaded && (file.uploadProgress || file.uploadProgress === 0)\"\r\n        class=\"s2-uploaded-file__info-progress\"\r\n      >\r\n        <div class=\"s2-uploaded-file__info-progress-background\">\r\n          <div\r\n            class=\"s2-uploaded-file__info-progress-line\"\r\n            [ngStyle]=\"{'width.%': file.uploadProgress}\"\r\n            role=\"progressbar\"\r\n            aria-valuemin=\"0\"\r\n            aria-valuemax=\"100\"\r\n            [attr.aria-valuenow]=\"file.uploadProgress\"\r\n            [attr.aria-label]=\"file.name\"\r\n          ></div>\r\n        </div>\r\n      </div>\r\n      <span\r\n        *ngIf=\"file.uploaded || (!file.uploadProgress && file.uploadProgress !== 0)\"\r\n        class=\"s2-uploaded-file__info-details\"\r\n      >\r\n        <span *ngIf=\"showDate && file.date\" class=\"s2-uploaded-file__info-details-date\">\r\n          {{ file.date | s2Date }}\r\n        </span>\r\n        <span\r\n          class=\"s2-uploaded-file__info-details-size\"\r\n          [ngClass]=\"{'s2-uploaded-file__info-details-size--uploaded': file.uploaded}\"\r\n        >\r\n          {{ file.size | bytesToText }} <s2-icon *ngIf=\"file.uploaded\">check</s2-icon>\r\n        </span>\r\n      </span>\r\n    </div>\r\n    <button\r\n      type=\"button\"\r\n      class=\"s2-uploaded-file__remove\"\r\n      (click)=\"handleRemoveFile(i)\"\r\n      [disabled]=\"!file.uploaded && (file.uploadProgress || file.uploadProgress === 0)\"\r\n    >\r\n      <s2-icon class=\"s2-uploaded-file__remove-icon\">{{ file.uploaded ? 'delete' : 'close' }}</s2-icon>\r\n    </button>\r\n  </li>\r\n</ul>\r\n", styles: [".s2-file-upload{display:block;border-radius:.375rem;border-width:2px;--tw-border-opacity: 1;border-color:hsl(var(--s2-color-neutral-200) / var(--tw-border-opacity));padding:.5rem;container-type:inline-size}.s2-file-upload__input{display:none}.s2-file-upload .s2-file-upload-header{display:flex;flex-direction:column;align-items:center;justify-content:center;row-gap:.25rem;border-radius:.375rem;border-width:1px;border-style:dashed;--tw-border-opacity: 1;border-color:hsl(var(--s2-color-neutral-300) / var(--tw-border-opacity));padding-top:.5rem;padding-bottom:.5rem}.s2-file-upload .s2-file-upload-header__icon{font-size:var(--s2-font-size-4xl);line-height:var(--s2-font-size-4xl-line-height);--tw-text-opacity: 1;color:hsl(var(--s2-color-text-400) / var(--tw-text-opacity))}.s2-file-upload .s2-file-upload-header__icon--responsive{display:none}@container (min-width: 24rem){.s2-file-upload .s2-file-upload-header__icon--responsive{display:inline-block}}.s2-file-upload .s2-file-upload-header__content-wrapper{display:flex;flex-direction:column;align-items:center;justify-content:center;column-gap:.375rem;row-gap:.125rem;padding-top:.125rem;padding-bottom:.125rem}@container (min-width: 24rem){.s2-file-upload .s2-file-upload-header__content-wrapper{flex-direction:row}}.s2-file-upload .s2-file-upload-header__text{display:inline}.s2-file-upload .s2-file-upload-header__text--responsive{display:none}@container (min-width: 24rem){.s2-file-upload .s2-file-upload-header__text--responsive{display:inline}}.s2-file-upload .s2-file-upload-header__choose{font-weight:500;--tw-text-opacity: 1;color:hsl(var(--s2-color-primary-500) / var(--tw-text-opacity))}.s2-file-upload .s2-file-upload-header__choose:hover{text-decoration-line:underline}.s2-file-upload .s2-file-upload-header__choose:disabled{--tw-text-opacity: 1;color:hsl(var(--s2-color-text-400) / var(--tw-text-opacity))}.s2-file-upload .s2-file-upload-header__choose:disabled:hover{text-decoration-line:none}.s2-file-upload .s2-file-upload-header__error{text-align:center;--tw-text-opacity: 1;color:hsl(var(--s2-color-risk-700) / var(--tw-text-opacity))}.s2-file-upload .s2-file-upload-header--disabled{--tw-bg-opacity: 1;background-color:hsl(var(--s2-color-neutral-050) / var(--tw-bg-opacity));--tw-text-opacity: 1;color:hsl(var(--s2-color-text-400) / var(--tw-text-opacity))}.s2-file-upload .s2-file-upload-header--disabled .s2-file-upload__icon{--tw-text-opacity: 1;color:hsl(var(--s2-color-text-300) / var(--tw-text-opacity))}.s2-file-upload .s2-uploaded-files{display:flex;flex-direction:column;gap:.25rem}.s2-file-upload .s2-uploaded-file{display:flex;align-items:center;gap:.5rem;overflow:hidden;border-bottom-width:1px;--tw-border-opacity: 1;border-color:hsl(var(--s2-color-neutral-200) / var(--tw-border-opacity));padding:.25rem}.s2-file-upload .s2-uploaded-file:first-child{margin-top:.5rem}.s2-file-upload .s2-uploaded-file:last-child{border-bottom-width:0px}.s2-file-upload .s2-uploaded-file__icon-wrapper{display:flex;height:2rem;width:2rem;flex-shrink:0;align-items:center;justify-content:center;border-radius:.375rem;--tw-bg-opacity: 1;background-color:hsl(var(--s2-color-neutral-100) / var(--tw-bg-opacity))}@container (min-width: 24rem){.s2-file-upload .s2-uploaded-file__icon-wrapper{height:2.5rem;width:2.5rem}}.s2-file-upload .s2-uploaded-file__icon{flex-shrink:0;font-size:var(--s2-font-size-2xl);line-height:1;--tw-text-opacity: 1;color:hsl(var(--s2-color-text-500) / var(--tw-text-opacity))}@container (min-width: 24rem){.s2-file-upload .s2-uploaded-file__icon{font-size:var(--s2-font-size-3xl);line-height:1}}.s2-file-upload .s2-uploaded-file__icon--uploaded{--tw-text-opacity: 1;color:hsl(var(--s2-color-text-600) / var(--tw-text-opacity))}.s2-file-upload .s2-uploaded-file__info{display:flex;flex-grow:1;flex-direction:column;overflow:hidden}.s2-file-upload .s2-uploaded-file__info-name{display:inline-block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;text-align:left;--tw-text-opacity: 1;color:hsl(var(--s2-color-text-700) / var(--tw-text-opacity))}.s2-file-upload .s2-uploaded-file__info-name--downloadable{--tw-text-opacity: 1;color:hsl(var(--s2-color-text-900) / var(--tw-text-opacity))}.s2-file-upload .s2-uploaded-file__info-name--downloadable:hover{text-decoration-line:underline}.s2-file-upload .s2-uploaded-file__info-progress{display:flex;width:100%;max-width:24rem;padding-top:.375rem;padding-bottom:.375rem}.s2-file-upload .s2-uploaded-file__info-progress-background{display:flex;height:.5rem;flex-grow:1;overflow:hidden;border-radius:9999px;--tw-bg-opacity: 1;background-color:hsl(var(--s2-color-neutral-100) / var(--tw-bg-opacity))}.s2-file-upload .s2-uploaded-file__info-progress-line{height:100%;--tw-bg-opacity: 1;background-color:hsl(var(--s2-color-primary-500) / var(--tw-bg-opacity));--tw-shadow: 0 4px 6px -1px rgb(0 0 0 / .1), 0 2px 4px -2px rgb(0 0 0 / .1);--tw-shadow-colored: 0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow);transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.s2-file-upload .s2-uploaded-file__info-details{display:flex;flex-wrap:wrap;column-gap:.5rem}.s2-file-upload .s2-uploaded-file__info-details-date{font-size:var(--s2-font-size-sm);line-height:var(--s2-font-size-sm-line-height);--tw-text-opacity: 1;color:hsl(var(--s2-color-text-400) / var(--tw-text-opacity))}.s2-file-upload .s2-uploaded-file__info-details-size{font-size:var(--s2-font-size-sm);line-height:var(--s2-font-size-sm-line-height);--tw-text-opacity: 1;color:hsl(var(--s2-color-text-500) / var(--tw-text-opacity))}.s2-file-upload .s2-uploaded-file__info-details-size--uploaded{--tw-text-opacity: 1;color:hsl(var(--s2-color-success-500) / var(--tw-text-opacity))}.s2-file-upload .s2-uploaded-file__remove{margin-left:auto;flex-shrink:0;padding:.25rem;--tw-text-opacity: 1;color:hsl(var(--s2-color-text-700) / var(--tw-text-opacity))}.s2-file-upload .s2-uploaded-file__remove:hover{--tw-text-opacity: 1;color:hsl(var(--s2-color-risk-700) / var(--tw-text-opacity))}.s2-file-upload .s2-uploaded-file__remove:disabled{--tw-text-opacity: 1;color:hsl(var(--s2-color-text-300) / var(--tw-text-opacity))}.s2-file-upload .s2-uploaded-file__remove-icon{font-size:var(--s2-font-size-xl);line-height:var(--s2-font-size-xl-line-height)}\n"] }]
        }], ctorParameters: function () { return [{ type: i1.S2UiTranslationsService }, { type: i0.DestroyRef }]; }, propDecorators: { accept: [{
                type: Input
            }], autoUploadMethod: [{
                type: Input
            }], browseButtonText: [{
                type: Input
            }], errorDuration: [{
                type: Input
            }], inputId: [{
                type: Input
            }], maxFiles: [{
                type: Input
            }], maxFileSize: [{
                type: Input
            }], showDate: [{
                type: Input
            }], showDragDropText: [{
                type: Input
            }], showHeaderIcon: [{
                type: Input
            }], clickDownload: [{
                type: Output
            }], clickRemove: [{
                type: Output
            }], autoUploadSuccess: [{
                type: Output
            }], autoUploadError: [{
                type: Output
            }], templatesQueryList: [{
                type: ContentChildren,
                args: [TemplateDirective]
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZmlsZS11cGxvYWQuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvbmd4LXMyLXVpL3NyYy9saWIvY29tcG9uZW50cy9maWxlLXVwbG9hZC9maWxlLXVwbG9hZC5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9uZ3gtczItdWkvc3JjL2xpYi9jb21wb25lbnRzL2ZpbGUtdXBsb2FkL2ZpbGUtdXBsb2FkLmNvbXBvbmVudC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSxnQ0FBZ0MsQ0FBQztBQUNqRSxPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0saUJBQWlCLENBQUM7QUFDL0MsT0FBTyxFQUVMLFNBQVMsRUFDVCxlQUFlLEVBRWYsWUFBWSxFQUNaLEtBQUssRUFDTCxNQUFNLEVBR04saUJBQWlCLEdBQ2xCLE1BQU0sZUFBZSxDQUFDO0FBQ3ZCLE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUM1QyxPQUFPLEVBQXdCLGlCQUFpQixFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDekUsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLGtDQUFrQyxDQUFDO0FBQ2pFLE9BQU8sRUFBRSxrQkFBa0IsRUFBRSxNQUFNLG9DQUFvQyxDQUFDO0FBQ3hFLE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLGdDQUFnQyxDQUFDO0FBQ2xFLE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLGlDQUFpQyxDQUFDO0FBQ25FLE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxNQUFNLGtDQUFrQyxDQUFDO0FBQ3JFLE9BQU8sRUFBYSxhQUFhLEVBQUUsTUFBTSxzQkFBc0IsQ0FBQztBQUNoRSxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sd0JBQXdCLENBQUM7QUFFdkQsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLDBC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QkFBaUIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBCeXRlc1RvVGV4dFBpcGUgfSBmcm9tICcuLi8uLi9waXBlcy9ieXRlcy10by10ZXh0LnBpcGUnO1xyXG5pbXBvcnQgeyBDb21tb25Nb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xyXG5pbXBvcnQge1xyXG4gIEFmdGVyQ29udGVudEluaXQsXHJcbiAgQ29tcG9uZW50LFxyXG4gIENvbnRlbnRDaGlsZHJlbixcclxuICBEZXN0cm95UmVmLFxyXG4gIEV2ZW50RW1pdHRlcixcclxuICBJbnB1dCxcclxuICBPdXRwdXQsXHJcbiAgUXVlcnlMaXN0LFxyXG4gIFRlbXBsYXRlUmVmLFxyXG4gIFZpZXdFbmNhcHN1bGF0aW9uLFxyXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBjYXRjaEVycm9yIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xyXG5pbXBvcnQgeyBDb250cm9sVmFsdWVBY2Nlc3NvciwgTkdfVkFMVUVfQUNDRVNTT1IgfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XHJcbmltcG9ydCB7IGV4cGFuZEZyb21Ub3AgfSBmcm9tICcuLi8uLi9hbmltYXRpb25zL2V4cGFuZC1mcm9tLXRvcCc7XHJcbmltcG9ydCB7IEZpbGVUeXBlVG9JY29uUGlwZSB9IGZyb20gJy4uLy4uL3BpcGVzL2ZpbGUtdHlwZS10by1pY29uLnBpcGUnO1xyXG5pbXBvcnQgeyBnZXRGaWxlRXh0ZW5zaW9uIH0gZnJvbSAnLi4vLi4vdXRpbHMvZ2V0LWZpbGUtZXh0ZW5zaW9uJztcclxuaW1wb3J0IHsgZ2V0TWltZVR5cGVDbGFzcyB9IGZyb20gJy4uLy4uL3V0aWxzL2dldC1taW1lLXR5cGUtY2xhc3MnO1xyXG5pbXBvcnQgeyBnZXRVbmlxdWVGaWxlTmFtZSB9IGZyb20gJy4uLy4uL3V0aWxzL2dldC11bmlxdWUtZmlsZS1uYW1lJztcclxuaW1wb3J0IHsgSHR0cEV2ZW50LCBIdHRwRXZlbnRUeXBlIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uL2h0dHAnO1xyXG5pbXBvcnQgeyBJY29uQ29tcG9uZW50IH0gZnJvbSAnLi4vaWNvbi9pY29uLmNvbXBvbmVudCc7XHJcbmltcG9ydCB7IE9ic2VydmFibGUgfSBmcm9tICdyeGpzL2ludGVybmFsL09ic2VydmFibGUnO1xyXG5pbXBvcnQgeyBSZXBsYWNlUGlwZSB9IGZyb20gJy4uLy4uL3BpcGVzL3JlcGxhY2UucGlwZSc7XHJcbmltcG9ydCB7IFMyRGF0ZVBpcGUgfSBmcm9tICcuLi8uLi9waXBlcy9kYXRlLnBpcGUnO1xyXG5pbXBvcnQgeyBTMlVpVHJhbnNsYXRpb25zU2VydmljZSB9IGZyb20gJy4uLy4uL3NlcnZpY2VzL3MyLXVpLXRyYW5zbGF0aW9ucy5zZXJ2aWNlJztcclxuaW1wb3J0IHsgdGFrZVVudGlsRGVzdHJveWVkIH0gZnJvbSAnQGFuZ3VsYXIvY29yZS9yeGpzLWludGVyb3AnO1xyXG5pbXBvcnQgeyBUZW1wbGF0ZURpcmVjdGl2ZSB9IGZyb20gJy4uLy4uL2RpcmVjdGl2ZXMvdGVtcGxhdGUuZGlyZWN0aXZlJztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgUzJGaWxlPFQgPSB1bmtub3duPiB7XHJcbiAgbmFtZTogc3RyaW5nO1xyXG4gIHR5cGU6IHN0cmluZztcclxuICBkYXRlPzogRGF0ZTtcclxuICBzaXplOiBudW1iZXI7XHJcbiAgdXBsb2FkZWQ/OiBib29sZWFuO1xyXG4gIHVwbG9hZFByb2dyZXNzPzogbnVtYmVyO1xyXG4gIGtleT86IHN0cmluZyB8IG51bWJlcjtcclxuICBpY29uPzogc3RyaW5nO1xyXG4gIGV4dHJhcz86IFQ7XHJcbiAgZmlsZT86IEZpbGU7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgUzJGaWxlVXBsb2FkRXJyb3Ige1xyXG4gIGZpbGVzOiBTMkZpbGVbXTtcclxuICBlcnJvcjogRXJyb3I7XHJcbn1cclxuXHJcbkBDb21wb25lbnQoe1xyXG4gIHNlbGVjdG9yOiAnczItZmlsZS11cGxvYWQnLFxyXG4gIHN0YW5kYWxvbmU6IHRydWUsXHJcbiAgaW1wb3J0czogW0NvbW1vbk1vZHVsZSwgSWNvbkNvbXBvbmVudCwgQnl0ZXNUb1RleHRQaXBlLCBSZXBsYWNlUGlwZSwgUzJEYXRlUGlwZSwgRmlsZVR5cGVUb0ljb25QaXBlXSxcclxuICB0ZW1wbGF0ZVVybDogJy4vZmlsZS11cGxvYWQuY29tcG9uZW50Lmh0bWwnLFxyXG4gIHN0eWxlVXJsczogWycuL2ZpbGUtdXBsb2FkLmNvbXBvbmVudC5zY3NzJ10sXHJcbiAgZW5jYXBzdWxhdGlvbjogVmlld0VuY2Fwc3VsYXRpb24uTm9uZSxcclxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQGFuZ3VsYXItZXNsaW50L25vLWhvc3QtbWV0YWRhdGEtcHJvcGVydHlcclxuICBob3N0OiB7IGNsYXNzOiAnczItZmlsZS11cGxvYWQnIH0sXHJcbiAgcHJvdmlkZXJzOiBbXHJcbiAgICB7XHJcbiAgICAgIHByb3ZpZGU6IE5HX1ZBTFVFX0FDQ0VTU09SLFxyXG4gICAgICBtdWx0aTogdHJ1ZSxcclxuICAgICAgdXNlRXhpc3Rpbmc6IEZpbGVVcGxvYWRDb21wb25lbnQsXHJcbiAgICB9LFxyXG4gIF0sXHJcbiAgYW5pbWF0aW9uczogW2V4cGFuZEZyb21Ub3AoKV0sXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBGaWxlVXBsb2FkQ29tcG9uZW50IGltcGxlbWVudHMgQ29udHJvbFZhbHVlQWNjZXNzb3IsIEFmdGVyQ29udGVudEluaXQge1xyXG4gIHN0YXRpYyByZWFkb25seSBTMl9URU1QTEFURV9IRUFERVIgPSAnaGVhZGVyJztcclxuICBzdGF0aWMgcmVhZG9ubHkgUzJfVEVNUExBVEVfSEVBREVSX0NPTlRFTlQgPSAnaGVhZGVyLWNvbnRlbnQnO1xyXG4gIHN0YXRpYyByZWFkb25seSBTMl9URU1QTEFURV9GSUxFX0lORk8gPSAnZmlsZS1pbmZvJztcclxuICByZWFkb25seSBTMl9URU1QTEFURV9IRUFERVIgPSBGaWxlVXBsb2FkQ29tcG9uZW50LlMyX1RFTVBMQVRFX0hFQURFUjtcclxuICByZWFkb25seSBTMl9URU1QTEFURV9IRUFERVJfQ09OVEVOVCA9IEZpbGVVcGxvYWRDb21wb25lbnQuUzJfVEVNUExBVEVfSEVBREVSX0NPTlRFTlQ7XHJcbiAgcmVhZG9ubHkgUzJfVEVNUExBVEVfRklMRV9JTkZPID0gRmlsZVVwbG9hZENvbXBvbmVudC5TMl9URU1QTEFURV9GSUxFX0lORk87XHJcblxyXG4gIEBJbnB1dCgpIGFjY2VwdDogc3RyaW5nO1xyXG4gIEBJbnB1dCgpIGF1dG9VcGxvYWRNZXRob2Q6IChmaWxlczogUzJGaWxlW10pID0+IE9ic2VydmFibGU8SHR0cEV2ZW50PFMyRmlsZVtdPj47XHJcbiAgQElucHV0KCkgYnJvd3NlQnV0dG9uVGV4dDogc3RyaW5nO1xyXG4gIEBJbnB1dCgpIGVycm9yRHVyYXRpb24gPSA1MDAwO1xyXG4gIEBJbnB1dCgpIGlucHV0SWQ6IHN0cmluZztcclxuICBASW5wdXQoKSBtYXhGaWxlcyA9IDU7XHJcbiAgQElucHV0KCkgbWF4RmlsZVNpemU6IG51bWJlciA9IDEwNDg1NzYwO1xyXG4gIEBJbnB1dCgpIHNob3dEYXRlID0gdHJ1ZTtcclxuICBASW5wdXQoKSBzaG93RHJhZ0Ryb3BUZXh0OiBib29sZWFuIHwgJ3Jlc3BvbnNpdmUnID0gJ3Jlc3BvbnNpdmUnO1xyXG4gIEBJbnB1dCgpIHNob3dIZWFkZXJJY29uOiBib29sZWFuIHwgJ3Jlc3BvbnNpdmUnID0gJ3Jlc3BvbnNpdmUnO1xyXG4gIEBPdXRwdXQoKSBjbGlja0Rvd25sb2FkID0gbmV3IEV2ZW50RW1pdHRlcjxTMkZpbGU+KCk7XHJcbiAgQE91dHB1dCgpIGNsaWNrUmVtb3ZlID0gbmV3IEV2ZW50RW1pdHRlcjxTMkZpbGU+KCk7XHJcbiAgQE91dHB1dCgpIGF1dG9VcGxvYWRTdWNjZXNzID0gbmV3IEV2ZW50RW1pdHRlcjxTMkZpbGVbXT4oKTtcclxuICBAT3V0cHV0KCkgYXV0b1VwbG9hZEVycm9yID0gbmV3IEV2ZW50RW1pdHRlcjxTMkZpbGVVcGxvYWRFcnJvcj4oKTtcclxuICBAQ29udGVudENoaWxkcmVuKFRlbXBsYXRlRGlyZWN0aXZlKVxyXG4gIHRlbXBsYXRlc1F1ZXJ5TGlzdDogUXVlcnlMaXN0PFRlbXBsYXRlRGlyZWN0aXZlPjtcclxuICB0ZW1wbGF0ZXM6IFJlY29yZDxzdHJpbmcsIFRlbXBsYXRlUmVmPHVua25vd24+PiA9IHt9O1xyXG5cclxuICBmaWxlczogUzJGaWxlW10gPSBbXTtcclxuICBlcnJvcjogJ21heEZpbGVzJyB8ICdtYXhGaWxlU2l6ZScgfCAnYWNjZXB0JztcclxuICBlcnJvckNsZWFyVGltZW91dDogTm9kZUpTLlRpbWVvdXQ7XHJcblxyXG4gIGRpc2FibGVkID0gZmFsc2U7XHJcbiAgb25DaGFuZ2U6ICh2YWx1ZTogUzJGaWxlW10pID0+IHZvaWQ7XHJcbiAgb25Ub3VjaGVkOiAoKSA9PiB2b2lkO1xyXG5cclxuICBjb25zdHJ1Y3RvcihwdWJsaWMgdHJhbnNsYXRpb25zU2VydmljZTogUzJVaVRyYW5zbGF0aW9uc1NlcnZpY2UsIHByaXZhdGUgZGVzdHJveVJlZjogRGVzdHJveVJlZikge31cclxuXHJcbiAgbmdBZnRlckNvbnRlbnRJbml0KCk6IHZvaWQge1xyXG4gICAgdGhpcy51cGRhdGVUZW1wbGF0ZXMoKTtcclxuICAgIHRoaXMudGVtcGxhdGVzUXVlcnlMaXN0LmNoYW5nZXMucGlwZSh0YWtlVW50aWxEZXN0cm95ZWQodGhpcy5kZXN0cm95UmVmKSkuc3Vic2NyaWJlKCgpID0+IHtcclxuICAgICAgdGhpcy51cGRhdGVUZW1wbGF0ZXMoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgd3JpdGVWYWx1ZShmaWxlczogUzJGaWxlW10pOiB2b2lkIHtcclxuICAgIGlmIChBcnJheS5pc0FycmF5KGZpbGVzKSkge1xyXG4gICAgICB0aGlzLmZpbGVzID0gZmlsZXM7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmZpbGVzID0gW107XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZWdpc3Rlck9uQ2hhbmdlKGZuOiAodmFsdWU6IFMyRmlsZVtdKSA9PiB2b2lkKTogdm9pZCB7XHJcbiAgICB0aGlzLm9uQ2hhbmdlID0gZm47XHJcbiAgfVxyXG5cclxuICByZWdpc3Rlck9uVG91Y2hlZChmbjogKCkgPT4gdm9pZCk6IHZvaWQge1xyXG4gICAgdGhpcy5vblRvdWNoZWQgPSBmbjtcclxuICB9XHJcblxyXG4gIHNldERpc2FibGVkU3RhdGU/KGlzRGlzYWJsZWQ6IGJvb2xlYW4pOiB2b2lkIHtcclxuICAgIHRoaXMuZGlzYWJsZWQgPSBpc0Rpc2FibGVkO1xyXG4gIH1cclxuXHJcbiAgbG9hZEZpbGVzKGZpbGVzOiBGaWxlW10pOiB2b2lkIHtcclxuICAgIGlmIChmaWxlcy5sZW5ndGgpIHtcclxuICAgICAgaWYgKGZpbGVzLmxlbmd0aCA+IHRoaXMubWF4RmlsZXMgLSB0aGlzLmZpbGVzLmxlbmd0aCkge1xyXG4gICAgICAgIHRoaXMuc2hvd0Vycm9yKCdtYXhGaWxlcycpO1xyXG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiB0aGlzLm1heEZpbGVTaXplID09PSAnbnVtYmVyJyAmJiBmaWxlcy5zb21lKChmaWxlKSA9PiBmaWxlLnNpemUgPiB0aGlzLm1heEZpbGVTaXplKSkge1xyXG4gICAgICAgIHRoaXMuc2hvd0Vycm9yKCdtYXhGaWxlU2l6ZScpO1xyXG4gICAgICB9IGVsc2UgaWYgKGZpbGVzLnNvbWUoKGZpbGUpID0+ICF0aGlzLmlzRmlsZVR5cGVBY2NlcHRlZChmaWxlKSkpIHtcclxuICAgICAgICB0aGlzLnNob3dFcnJvcignYWNjZXB0Jyk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5zaG93RXJyb3IodW5kZWZpbmVkKTtcclxuICAgICAgICBjb25zdCBzMkZpbGVzID0gZmlsZXMubWFwKChmaWxlKSA9PiAoe1xyXG4gICAgICAgICAgbmFtZTogZ2V0VW5pcXVlRmlsZU5hbWUoXHJcbiAgICAgICAgICAgIGZpbGUubmFtZSxcclxuICAgICAgICAgICAgdGhpcy5maWxlcy5tYXAoKGZpbGUpID0+IGZpbGUubmFtZSlcclxuICAgICAgICAgICksXHJcbiAgICAgICAgICB0eXBlOiBmaWxlLnR5cGUsXHJcbiAgICAgICAgICBzaXplOiBmaWxlLnNpemUsXHJcbiAgICAgICAgICB1cGxvYWRlZDogZmFsc2UsXHJcbiAgICAgICAgICBkYXRlOiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgICAgZmlsZSxcclxuICAgICAgICB9KSk7XHJcbiAgICAgICAgdGhpcy5maWxlcyA9IFsuLi50aGlzLmZpbGVzLCAuLi5zMkZpbGVzXTtcclxuICAgICAgICB0aGlzLmF1dG9VcGxvYWRGaWxlcyhzMkZpbGVzKTtcclxuICAgICAgICB0aGlzLm9uQ2hhbmdlPy4odGhpcy5maWxlcyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIGF1dG9VcGxvYWRGaWxlcyhmaWxlczogUzJGaWxlW10pOiB2b2lkIHtcclxuICAgIHRoaXMuYXV0b1VwbG9hZE1ldGhvZD8uKGZpbGVzKVxyXG4gICAgICAucGlwZShcclxuICAgICAgICBjYXRjaEVycm9yKChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgZmlsZXM/LmZvckVhY2goKGZpbGUpID0+IHtcclxuICAgICAgICAgICAgZmlsZS51cGxvYWRQcm9ncmVzcyA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgdGhpcy5vbkNoYW5nZT8uKHRoaXMuZmlsZXMpO1xyXG4gICAgICAgICAgdGhpcy5hdXRvVXBsb2FkRXJyb3IuZW1pdCh7IGZpbGVzLCBlcnJvcjogZXJyb3IgYXMgRXJyb3IgfSk7XHJcbiAgICAgICAgICB0aHJvdyBlcnJvcjtcclxuICAgICAgICB9KVxyXG4gICAgICApXHJcbiAgICAgIC5zdWJzY3JpYmUoe1xyXG4gICAgICAgIG5leHQ6IChldmVudCkgPT4ge1xyXG4gICAgICAgICAgaWYgKGV2ZW50LnR5cGUgPT09IEh0dHBFdmVudFR5cGUuVXBsb2FkUHJvZ3Jlc3MpIHtcclxuICAgICAgICAgICAgY29uc3QgcHJvZ3Jlc3MgPSBNYXRoLnJvdW5kKChldmVudC5sb2FkZWQgKiAxMDApIC8gZXZlbnQudG90YWwpO1xyXG4gICAgICAgICAgICBmaWxlcz8uZm9yRWFjaCgoZmlsZSkgPT4ge1xyXG4gICAgICAgICAgICAgIGZpbGUudXBsb2FkUHJvZ3Jlc3MgPSBwcm9ncmVzcztcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LnR5cGUgPT09IEh0dHBFdmVudFR5cGUuUmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgaWYgKGV2ZW50LnN0YXR1cyA+PSAyMDAgJiYgZXZlbnQuc3RhdHVzIDwgMzAwKSB7XHJcbiAgICAgICAgICAgICAgZmlsZXM/LmZvckVhY2goKGZpbGUpID0+IHtcclxuICAgICAgICAgICAgICAgIGZpbGUudXBsb2FkUHJvZ3Jlc3MgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICBmaWxlLnVwbG9hZGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlY2VpdmVkRmlsZSA9IGV2ZW50LmJvZHk/LmZpbmQoKHJlc3BvbnNlRmlsZSkgPT4gcmVzcG9uc2VGaWxlPy5uYW1lID09PSBmaWxlLm5hbWUpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlY2VpdmVkRmlsZSkge1xyXG4gICAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKGZpbGUsIHJlY2VpdmVkRmlsZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgdGhpcy5vbkNoYW5nZT8uKHRoaXMuZmlsZXMpO1xyXG4gICAgICAgICAgICAgIHRoaXMuYXV0b1VwbG9hZFN1Y2Nlc3MuZW1pdChmaWxlcyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBIdHRwUmVzcG9uc2Ugc3RhdHVzICR7ZXZlbnQuc3RhdHVzfWApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICBoYW5kbGVJbnB1dENoYW5nZShldmVudDogRXZlbnQpOiB2b2lkIHtcclxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBpZiAoIXRoaXMuZGlzYWJsZWQpIHtcclxuICAgICAgdGhpcy5vblRvdWNoZWQ/LigpO1xyXG4gICAgICB0aGlzLmxvYWRGaWxlcyhBcnJheS5mcm9tKChldmVudC50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkuZmlsZXMpKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGhhbmRsZURyb3BGaWxlKGV2ZW50OiBEcmFnRXZlbnQpOiB2b2lkIHtcclxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBpZiAoIXRoaXMuZGlzYWJsZWQpIHtcclxuICAgICAgdGhpcy5vblRvdWNoZWQ/LigpO1xyXG4gICAgICB0aGlzLmxvYWRGaWxlcyhBcnJheS5mcm9tKGV2ZW50LmRhdGFUcmFuc2Zlci5maWxlcykpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgaGFuZGxlRG93bmxvYWRGaWxlKGZpbGU6IFMyRmlsZSk6IHZvaWQge1xyXG4gICAgdGhpcy5jbGlja0Rvd25sb2FkLmVtaXQoZmlsZSk7XHJcbiAgfVxyXG5cclxuICBoYW5kbGVSZW1vdmVGaWxlKGluZGV4OiBudW1iZXIpOiB2b2lkIHtcclxuICAgIHRoaXMuY2xpY2tSZW1vdmUuZW1pdCh0aGlzLmZpbGVzW2luZGV4XSk7XHJcbiAgICB0aGlzLmZpbGVzLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICB0aGlzLm9uQ2hhbmdlPy4odGhpcy5maWxlcyk7XHJcbiAgfVxyXG5cclxuICBzaG93RXJyb3IoZXJyb3I6IHR5cGVvZiB0aGlzLmVycm9yKTogdm9pZCB7XHJcbiAgICBjbGVhclRpbWVvdXQodGhpcy5lcnJvckNsZWFyVGltZW91dCk7XHJcbiAgICB0aGlzLmVycm9yID0gZXJyb3I7XHJcbiAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgdGhpcy5lcnJvckNsZWFyVGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuZXJyb3IgPSB1bmRlZmluZWQ7XHJcbiAgICAgIH0sIHRoaXMuZXJyb3JEdXJhdGlvbik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBpc0ZpbGVUeXBlQWNjZXB0ZWQoZmlsZTogRmlsZSk6IGJvb2xlYW4ge1xyXG4gICAgaWYgKCF0aGlzLmFjY2VwdCB8fCB0aGlzLmFjY2VwdCA9PT0gJyonKSB7XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgY29uc3QgYWNjZXB0QXJyYXkgPSB0aGlzLmFjY2VwdFxyXG4gICAgICAuc3BsaXQoJywnKVxyXG4gICAgICAubWFwKCh0eXBlKSA9PiB0eXBlLnRyaW0oKSlcclxuICAgICAgLmZpbHRlcigodHlwZSkgPT4gdHlwZSk7XHJcbiAgICByZXR1cm4gYWNjZXB0QXJyYXkuc29tZSgoYWNjZXB0YWJsZVR5cGUpID0+IHtcclxuICAgICAgaWYgKGFjY2VwdGFibGVUeXBlLmluZGV4T2YoJyonKSAhPT0gLTEpIHtcclxuICAgICAgICByZXR1cm4gZ2V0TWltZVR5cGVDbGFzcyhmaWxlLnR5cGUpID09PSBnZXRNaW1lVHlwZUNsYXNzKGFjY2VwdGFibGVUeXBlKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgZmlsZS50eXBlID09PSBhY2NlcHRhYmxlVHlwZSB8fCBnZXRGaWxlRXh0ZW5zaW9uKGZpbGUubmFtZSkudG9Mb3dlckNhc2UoKSA9PT0gYWNjZXB0YWJsZVR5cGUudG9Mb3dlckNhc2UoKVxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlVGVtcGxhdGVzKCk6IHZvaWQge1xyXG4gICAgT2JqZWN0LmtleXModGhpcy50ZW1wbGF0ZXMpLmZvckVhY2goKHRlbXBsYXRlS2V5KSA9PiB7XHJcbiAgICAgIGlmICghdGhpcy50ZW1wbGF0ZXNRdWVyeUxpc3Quc29tZSgodGVtcGxhdGUpID0+IHRlbXBsYXRlLnMyVGVtcGxhdGUgPT09IHRlbXBsYXRlS2V5KSkge1xyXG4gICAgICAgIGRlbGV0ZSB0aGlzLnRlbXBsYXRlc1t0ZW1wbGF0ZUtleV07XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgdGhpcy50ZW1wbGF0ZXNRdWVyeUxpc3QuZm9yRWFjaCgodGVtcGxhdGUpID0+IHtcclxuICAgICAgdGhpcy50ZW1wbGF0ZXNbdGVtcGxhdGUuczJUZW1wbGF0ZV0gPSB0ZW1wbGF0ZS50ZW1wbGF0ZTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCI8aW5wdXRcclxuICBjbGFzcz1cInMyLWZpbGUtdXBsb2FkX19pbnB1dFwiXHJcbiAgdHlwZT1cImZpbGVcIlxyXG4gIFtpZF09XCJpbnB1dElkXCJcclxuICAoY2hhbmdlKT1cImhhbmRsZUlucHV0Q2hhbmdlKCRldmVudClcIlxyXG4gIFttdWx0aXBsZV09XCJtYXhGaWxlcyA+IDEgJiYgZmlsZXMubGVuZ3RoIDwgKG1heEZpbGVzLTEpXCJcclxuICBbYWNjZXB0XT1cImFjY2VwdFwiXHJcbiAgW2Rpc2FibGVkXT1cImRpc2FibGVkXCJcclxuICAjaW5wdXRGaWxlXHJcbi8+XHJcblxyXG48bmctdGVtcGxhdGUgKm5nSWY9XCJ0ZW1wbGF0ZXNbUzJfVEVNUExBVEVfSEVBREVSXVwiIFtuZ1RlbXBsYXRlT3V0bGV0XT1cInRlbXBsYXRlc1tTMl9URU1QTEFURV9IRUFERVJdXCIgLz5cclxuXHJcbjxkaXZcclxuICAqbmdJZj1cIiF0ZW1wbGF0ZXNbUzJfVEVNUExBVEVfSEVBREVSXVwiXHJcbiAgY2xhc3M9XCJzMi1maWxlLXVwbG9hZC1oZWFkZXJcIlxyXG4gIFtuZ0NsYXNzXT1cInsnczItZmlsZS11cGxvYWQtaGVhZGVyLS1kaXNhYmxlZCc6IGRpc2FibGVkIHx8IGZpbGVzLmxlbmd0aCA+PSBtYXhGaWxlc31cIlxyXG4gIChkcmFnb3Zlcik9XCIkZXZlbnQucHJldmVudERlZmF1bHQoKTsgJGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXCJcclxuICAoZHJhZ2xlYXZlKT1cIiRldmVudC5wcmV2ZW50RGVmYXVsdCgpOyAkZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcIlxyXG4gIChkcm9wKT1cImhhbmRsZURyb3BGaWxlKCRldmVudClcIlxyXG4+XHJcbiAgPG5nLXRlbXBsYXRlXHJcbiAgICAqbmdJZj1cInRlbXBsYXRlc1tTMl9URU1QTEFURV9IRUFERVJfQ09OVEVOVF1cIlxyXG4gICAgW25nVGVtcGxhdGVPdXRsZXRdPVwidGVtcGxhdGVzW1MyX1RFTVBMQVRFX0hFQURFUl9DT05URU5UXVwiXHJcbiAgLz5cclxuXHJcbiAgPG5nLWNvbnRhaW5lciAqbmdJZj1cIiF0ZW1wbGF0ZXNbUzJfVEVNUExBVEVfSEVBREVSX0NPTlRFTlRdXCI+XHJcbiAgICA8czItaWNvblxyXG4gICAgICAqbmdJZj1cInNob3dIZWFkZXJJY29uXCJcclxuICAgICAgY2xhc3M9XCJzMi1maWxlLXVwbG9hZC1oZWFkZXJfX2ljb25cIlxyXG4gICAgICBbbmdDbGFzc109XCJ7J3MyLWZpbGUtdXBsb2FkLWhlYWRlcl9faWNvbi0tcmVzcG9uc2l2ZSc6IHNob3dIZWFkZXJJY29uID09PSAncmVzcG9uc2l2ZSd9XCJcclxuICAgICAgPmZpbGVfdXBsb2FkPC9zMi1pY29uXHJcbiAgICA+XHJcbiAgICA8ZGl2IGNsYXNzPVwiczItZmlsZS11cGxvYWQtaGVhZGVyX19jb250ZW50LXdyYXBwZXJcIj5cclxuICAgICAgPG5nLWNvbnRhaW5lciAqbmdJZj1cIiFlcnJvclwiPlxyXG4gICAgICAgIDxuZy1jb250YWluZXIgKm5nSWY9XCJzaG93RHJhZ0Ryb3BUZXh0XCI+XHJcbiAgICAgICAgICA8c3BhblxyXG4gICAgICAgICAgICBjbGFzcz1cInMyLWZpbGUtdXBsb2FkLWhlYWRlcl9fdGV4dFwiXHJcbiAgICAgICAgICAgIFtuZ0NsYXNzXT1cInsnczItZmlsZS11cGxvYWQtaGVhZGVyX190ZXh0LS1yZXNwb25zaXZlJzogc2hvd0RyYWdEcm9wVGV4dCA9PT0gJ3Jlc3BvbnNpdmUnfVwiXHJcbiAgICAgICAgICAgID57eyB0cmFuc2xhdGlvbnNTZXJ2aWNlLnRyYW5zbGF0aW9ucy5hY3Rpb24uZHJhZ0ZpbGVzSGVyZSB9fTwvc3BhblxyXG4gICAgICAgICAgPlxyXG4gICAgICAgICAgPHNwYW5cclxuICAgICAgICAgICAgY2xhc3M9XCJzMi1maWxlLXVwbG9hZC1oZWFkZXJfX3RleHRcIlxyXG4gICAgICAgICAgICBbbmdDbGFzc109XCJ7J3MyLWZpbGUtdXBsb2FkLWhlYWRlcl9fdGV4dC0tcmVzcG9uc2l2ZSc6IHNob3dEcmFnRHJvcFRleHQgPT09ICdyZXNwb25zaXZlJ31cIlxyXG4gICAgICAgICAgICA+e3sgdHJhbnNsYXRpb25zU2VydmljZS50cmFuc2xhdGlvbnMuZ2VuZXJhbC5vciB8IGxvd2VyY2FzZSB9fTwvc3BhblxyXG4gICAgICAgICAgPlxyXG4gICAgICAgIDwvbmctY29udGFpbmVyPlxyXG4gICAgICAgIDxidXR0b25cclxuICAgICAgICAgIHR5cGU9XCJidXR0b25cIlxyXG4gICAgICAgICAgY2xhc3M9XCJzMi1maWxlLXVwbG9hZC1oZWFkZXJfX2Nob29zZVwiXHJcbiAgICAgICAgICBbZGlzYWJsZWRdPVwiZGlzYWJsZWQgfHwgZmlsZXMubGVuZ3RoID49IG1heEZpbGVzXCJcclxuICAgICAgICAgIChjbGljayk9XCJpbnB1dEZpbGUuY2xpY2soKVwiXHJcbiAgICAgICAgPlxyXG4gICAgICAgICAge3sgYnJvd3NlQnV0dG9uVGV4dCA9PT0gdW5kZWZpbmVkID8gdHJhbnNsYXRpb25zU2VydmljZS50cmFuc2xhdGlvbnMuYWN0aW9uLmJyb3dzZSA6IGJyb3dzZUJ1dHRvblRleHQgfX1cclxuICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgPC9uZy1jb250YWluZXI+XHJcbiAgICAgIDxzcGFuICpuZ0lmPVwiZXJyb3JcIiBjbGFzcz1cInMyLWZpbGUtdXBsb2FkLWhlYWRlcl9fZXJyb3JcIj5cclxuICAgICAgICA8bmctY29udGFpbmVyXHJcbiAgICAgICAgICAqbmdJZj1cImVycm9yID09PSAnYWNjZXB0J1wiXHJcbiAgICAgICAgICA+e3sgdHJhbnNsYXRpb25zU2VydmljZS50cmFuc2xhdGlvbnMuZXJyb3JNc2cuaW52YWxpZEZpbGVGb3JtYXQgfCByZXBsYWNlOid7MH0nOmFjY2VwdCB9fTwvbmctY29udGFpbmVyXHJcbiAgICAgICAgPlxyXG4gICAgICAgIDxuZy1jb250YWluZXJcclxuICAgICAgICAgICpuZ0lmPVwiZXJyb3IgPT09ICdtYXhGaWxlcydcIlxyXG4gICAgICAgICAgPnt7IHRyYW5zbGF0aW9uc1NlcnZpY2UudHJhbnNsYXRpb25zLmVycm9yTXNnLm1heEZpbGVzRXhjZWVkIHwgcmVwbGFjZTonezB9JzptYXhGaWxlcysnJyB9fTwvbmctY29udGFpbmVyXHJcbiAgICAgICAgPlxyXG4gICAgICAgIDxuZy1jb250YWluZXJcclxuICAgICAgICAgICpuZ0lmPVwiZXJyb3IgPT09ICdtYXhGaWxlU2l6ZSdcIlxyXG4gICAgICAgICAgPnt7IHRyYW5zbGF0aW9uc1NlcnZpY2UudHJhbnNsYXRpb25zLmVycm9yTXNnLm1heEZpbGVTaXplRXhjZWVkIHwgcmVwbGFjZTonezB9JzoobWF4RmlsZVNpemUgfCBieXRlc1RvVGV4dClcclxuICAgICAgICAgIH19PC9uZy1jb250YWluZXJcclxuICAgICAgICA+XHJcbiAgICAgIDwvc3Bhbj5cclxuICAgIDwvZGl2PlxyXG4gIDwvbmctY29udGFpbmVyPlxyXG48L2Rpdj5cclxuXHJcbjx1bCBjbGFzcz1cInMyLXVwbG9hZGVkLWZpbGVzXCI+XHJcbiAgPGxpICpuZ0Zvcj1cImxldCBmaWxlIG9mIGZpbGVzOyBpbmRleCBhcyBpXCIgY2xhc3M9XCJzMi11cGxvYWRlZC1maWxlXCIgQGV4cGFuZEZyb21Ub3A+XHJcbiAgICA8ZGl2IGNsYXNzPVwiczItdXBsb2FkZWQtZmlsZV9faWNvbi13cmFwcGVyXCI+XHJcbiAgICAgIDxzMi1pY29uXHJcbiAgICAgICAgY2xhc3M9XCJzMi11cGxvYWRlZC1maWxlX19pY29uXCJcclxuICAgICAgICBbbmdDbGFzc109XCJ7J3MyLXVwbG9hZGVkLWZpbGVfX2ljb24tLXVwbG9hZGVkJzogZmlsZS51cGxvYWRlZH1cIlxyXG4gICAgICAgID57eyBmaWxlLmljb24gfHwgKGZpbGUudHlwZSB8IGZpbGVUeXBlVG9JY29uKSB9fTwvczItaWNvblxyXG4gICAgICA+XHJcbiAgICA8L2Rpdj5cclxuICAgIDxuZy1jb250YWluZXIgKm5nVGVtcGxhdGVPdXRsZXQ9XCJ0ZW1wbGF0ZXNbUzJfVEVNUExBVEVfRklMRV9JTkZPXTsgY29udGV4dDogeyRpbXBsaWNpdDogZmlsZSwgaW5kZXg6IGl9XCIgLz5cclxuICAgIDxkaXYgKm5nSWY9XCIhdGVtcGxhdGVzW1MyX1RFTVBMQVRFX0ZJTEVfSU5GT11cIiBjbGFzcz1cInMyLXVwbG9hZGVkLWZpbGVfX2luZm9cIj5cclxuICAgICAgPHNwYW4gKm5nSWY9XCIhZmlsZS51cGxvYWRlZFwiIGNsYXNzPVwiczItdXBsb2FkZWQtZmlsZV9faW5mby1uYW1lXCIgW3RpdGxlXT1cImZpbGUubmFtZVwiPnt7IGZpbGUubmFtZSB9fTwvc3Bhbj5cclxuICAgICAgPGJ1dHRvblxyXG4gICAgICAgICpuZ0lmPVwiZmlsZS51cGxvYWRlZFwiXHJcbiAgICAgICAgdHlwZT1cImJ1dHRvblwiXHJcbiAgICAgICAgY2xhc3M9XCJzMi11cGxvYWRlZC1maWxlX19pbmZvLW5hbWVcIlxyXG4gICAgICAgIFtuZ0NsYXNzXT1cInsnczItdXBsb2FkZWQtZmlsZV9faW5mby1uYW1lLS1kb3dubG9hZGFibGUnOiB0cnVlfVwiXHJcbiAgICAgICAgW3RpdGxlXT1cImZpbGUubmFtZVwiXHJcbiAgICAgICAgKGNsaWNrKT1cImhhbmRsZURvd25sb2FkRmlsZShmaWxlKVwiXHJcbiAgICAgID5cclxuICAgICAgICB7eyBmaWxlLm5hbWUgfX1cclxuICAgICAgPC9idXR0b24+XHJcbiAgICAgIDxkaXZcclxuICAgICAgICAqbmdJZj1cIiFmaWxlLnVwbG9hZGVkICYmIChmaWxlLnVwbG9hZFByb2dyZXNzIHx8IGZpbGUudXBsb2FkUHJvZ3Jlc3MgPT09IDApXCJcclxuICAgICAgICBjbGFzcz1cInMyLXVwbG9hZGVkLWZpbGVfX2luZm8tcHJvZ3Jlc3NcIlxyXG4gICAgICA+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cInMyLXVwbG9hZGVkLWZpbGVfX2luZm8tcHJvZ3Jlc3MtYmFja2dyb3VuZFwiPlxyXG4gICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICBjbGFzcz1cInMyLXVwbG9hZGVkLWZpbGVfX2luZm8tcHJvZ3Jlc3MtbGluZVwiXHJcbiAgICAgICAgICAgIFtuZ1N0eWxlXT1cInsnd2lkdGguJSc6IGZpbGUudXBsb2FkUHJvZ3Jlc3N9XCJcclxuICAgICAgICAgICAgcm9sZT1cInByb2dyZXNzYmFyXCJcclxuICAgICAgICAgICAgYXJpYS12YWx1ZW1pbj1cIjBcIlxyXG4gICAgICAgICAgICBhcmlhLXZhbHVlbWF4PVwiMTAwXCJcclxuICAgICAgICAgICAgW2F0dHIuYXJpYS12YWx1ZW5vd109XCJmaWxlLnVwbG9hZFByb2dyZXNzXCJcclxuICAgICAgICAgICAgW2F0dHIuYXJpYS1sYWJlbF09XCJmaWxlLm5hbWVcIlxyXG4gICAgICAgICAgPjwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8L2Rpdj5cclxuICAgICAgPHNwYW5cclxuICAgICAgICAqbmdJZj1cImZpbGUudXBsb2FkZWQgfHwgKCFmaWxlLnVwbG9hZFByb2dyZXNzICYmIGZpbGUudXBsb2FkUHJvZ3Jlc3MgIT09IDApXCJcclxuICAgICAgICBjbGFzcz1cInMyLXVwbG9hZGVkLWZpbGVfX2luZm8tZGV0YWlsc1wiXHJcbiAgICAgID5cclxuICAgICAgICA8c3BhbiAqbmdJZj1cInNob3dEYXRlICYmIGZpbGUuZGF0ZVwiIGNsYXNzPVwiczItdXBsb2FkZWQtZmlsZV9faW5mby1kZXRhaWxzLWRhdGVcIj5cclxuICAgICAgICAgIHt7IGZpbGUuZGF0ZSB8IHMyRGF0ZSB9fVxyXG4gICAgICAgIDwvc3Bhbj5cclxuICAgICAgICA8c3BhblxyXG4gICAgICAgICAgY2xhc3M9XCJzMi11cGxvYWRlZC1maWxlX19pbmZvLWRldGFpbHMtc2l6ZVwiXHJcbiAgICAgICAgICBbbmdDbGFzc109XCJ7J3MyLXVwbG9hZGVkLWZpbGVfX2luZm8tZGV0YWlscy1zaXplLS11cGxvYWRlZCc6IGZpbGUudXBsb2FkZWR9XCJcclxuICAgICAgICA+XHJcbiAgICAgICAgICB7eyBmaWxlLnNpemUgfCBieXRlc1RvVGV4dCB9fSA8czItaWNvbiAqbmdJZj1cImZpbGUudXBsb2FkZWRcIj5jaGVjazwvczItaWNvbj5cclxuICAgICAgICA8L3NwYW4+XHJcbiAgICAgIDwvc3Bhbj5cclxuICAgIDwvZGl2PlxyXG4gICAgPGJ1dHRvblxyXG4gICAgICB0eXBlPVwiYnV0dG9uXCJcclxuICAgICAgY2xhc3M9XCJzMi11cGxvYWRlZC1maWxlX19yZW1vdmVcIlxyXG4gICAgICAoY2xpY2spPVwiaGFuZGxlUmVtb3ZlRmlsZShpKVwiXHJcbiAgICAgIFtkaXNhYmxlZF09XCIhZmlsZS51cGxvYWRlZCAmJiAoZmlsZS51cGxvYWRQcm9ncmVzcyB8fCBmaWxlLnVwbG9hZFByb2dyZXNzID09PSAwKVwiXHJcbiAgICA+XHJcbiAgICAgIDxzMi1pY29uIGNsYXNzPVwiczItdXBsb2FkZWQtZmlsZV9fcmVtb3ZlLWljb25cIj57eyBmaWxlLnVwbG9hZGVkID8gJ2RlbGV0ZScgOiAnY2xvc2UnIH19PC9zMi1pY29uPlxyXG4gICAgPC9idXR0b24+XHJcbiAgPC9saT5cclxuPC91bD5cclxuIl19